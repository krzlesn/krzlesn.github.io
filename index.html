<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Krzysztof Leśniewski</title>
  <meta name="color-scheme" content="light">

  <!-- Jeśli to project site pod /lesniewskik.github.io/, możesz włączyć bazę -->
  <!-- <base href="/lesniewskik.github.io/"> -->

  <link rel="stylesheet" href="main.css" />

  <!-- Warstwy tła i stacking -->
  <style>
    /* CANVAS nad tłem body, ale pod treścią */
    #glbg{ position:fixed; inset:0; z-index:0; display:block; background: var(--bg); }
    /* Delikatna „mgiełka” nad CANVAS, nadal pod treścią */
    .frost-overlay{
      position:fixed; inset:0; pointer-events:none; z-index:1;
      background:
        radial-gradient(1200px 800px at 110% -10%, rgba(255,255,255,.10), transparent 55%),
        radial-gradient(900px 700px at -10% 0%, rgba(255,255,255,.10), transparent 60%);
    }

    /* Treść zawsze NA WIERZCHU */
    .site-header, .site-nav, .container, .site-footer{
      position: relative; z-index: 2;
    }

    /* Szanuj prefer-reduced-motion */
    @media (prefers-reduced-motion: reduce){
      #glbg{ display:none; }
    }
  </style>

  <!-- MathJax -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script>
    MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };
  </script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>
  <!-- Animowane tło -->
  <canvas id="glbg" aria-hidden="true"></canvas>
  <div class="frost-overlay" aria-hidden="true"></div>

  <header class="site-header">
    <h1 class="site-title">Krzysztof Leśniewski</h1>
    <p class="site-subtitle">Matematyka • Analiza • Optymalizacja</p>
    <div class="hr"></div>
  </header>

  <nav class="site-nav">
    <ul>
      <li><a href="analiza-mini2.html">Analiza — do poczytania</a></li>
      <li><a href="https://1drv.ms/f/s!Amza0q5wjUyNgc14zwWl6u3LFDd3Zw?e=gEP4LU">DDE (NEW)</a></li>
      <li><a href="DDE.html">DDE (OLD)</a></li>
      <li><a href="https://1drv.ms/f/s!Amza0q5wjUyNgc15ik32yVouH-sDQA?e=bpPELh">Analiza I — stacjonarne WIL</a></li>
      <li><a href="https://1drv.ms/f/s!Amza0q5wjUyNgc1JRomNFHlhP9C_Dg?e=SGXQw8">Analiza I — zadania WIL</a></li>
      <li><a href="https://1drv.ms/u/s!Amza0q5wjUyNgaUdr5i74CyqVB1BKg?e=xmRhZC">Analiza I — niestacjonarne WIL</a></li>
      <li><a href="#">Calculus I</a></li>
      <li><a href="https://www.researchgate.net/profile/Krzysztof_Lesniewski2">Articles</a></li>
      <li><a href="pdfs/zadania01.pdf">Zadania 01 (PDF)</a></li>
    </ul>
  </nav>

  <main class="container">
    <section class="card">
      <h2>Witaj!</h2>
      <p>
        Tu będą materiały do zajęć, zadania (PDF), krótkie notatki z LaTeX-em
        i odnośniki. Przykład wzoru:
      </p>
      <p>$$ \nabla f(x^*) = 0,\quad H_f(x^*) \succeq 0. $$</p>
    </section>

    <section class="card">
      <h3>Kontakt</h3>
      <p>
        <a href="mailto:k.lesniewski">k.lesniewski</a> ·
        <a href="https://mini.pw.edu.pl">mini.pw.edu.pl</a> ·
        <a href="http://www.ibspan.waw.pl/">ibspan.waw.pl</a>
      </p>
    </section>
  </main>

  <footer class="site-footer">
    <small>&copy; <span id="year"></span> Krzysztof Leśniewski</small>
  </footer>

  <script>
    // Rok w stopce
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
<script>
const canvas = document.getElementById('glbg');
const ctx = canvas.getContext('2d');

function fitCanvas(){
  const dpr = Math.min(2, window.devicePixelRatio || 1);
  const w = innerWidth, h = innerHeight;
  canvas.width = Math.floor(w * dpr);
  canvas.height = Math.floor(h * dpr);
  canvas.style.width = w + "px";
  canvas.style.height = h + "px";
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // skalowanie rysowania pod dpr
}
fitCanvas();
addEventListener('resize', fitCanvas, { passive:true });

const params = {
  speed: 0.015,       // dużo wolniej
  density: 1.25,      // większe, „miękkie” fale
  strength: 0.18,     // subtelniejszy kontrast
  base: [248,250,253],// bardzo jasne tło
  tint: [190,205,220] // chłodny, ale delikatny błękit
};

const reduceMotion = matchMedia('(prefers-reduced-motion: reduce)').matches;

function noise2D(x,y){
  // szybki „szum” – wystarczająco ładny jako tło
  return Math.sin(x*1.3 + Math.cos(y*1.7))*0.5 + Math.sin(y*0.7 - x*0.9)*0.5;
}

let t0 = performance.now();
function frame(){
  const t = (performance.now() - t0) * 0.001 * params.speed;
  const W = canvas.clientWidth;
  const H = canvas.clientHeight;

  // tło bazowe (gdyby animacja się spóźniła, i tak będzie jasno)
  ctx.fillStyle = `rgb(${params.base[0]},${params.base[1]},${params.base[2]})`;
  ctx.fillRect(0, 0, W, H);

  const scale = 0.9 * params.density / 300;  // skala szumu
  const amp = 60 * params.strength;          // wpływ tintu

  // rysujemy w paskach dla wydajności
  const stepY = Math.max(2, Math.floor(H / 180));
  for (let y = 0; y < H; y += stepY) {
    const n = noise2D(0, (y + t*120) * (scale*300));
    const r = Math.min(255, params.base[0] + (params.tint[0]-params.base[0]) * (0.5+n)*0.12 + amp*0.02);
    const g = Math.min(255, params.base[1] + (params.tint[1]-params.base[1]) * (0.5+n)*0.16 + amp*0.03);
    const b = Math.min(255, params.base[2] + (params.tint[2]-params.base[2]) * (0.5+n)*0.22 + amp*0.04);
    ctx.fillStyle = `rgb(${r|0},${g|0},${b|0})`;
    ctx.fillRect(0, y, W, stepY);
  }

  if (!reduceMotion) requestAnimationFrame(frame);
}
frame();
</script>
  
</body>
</html>